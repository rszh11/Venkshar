<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Venkshar</title>
  <link rel="stylesheet" href="styles.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&display=swap" rel="stylesheet" />
</head>
<body>
  <header role="banner">
    <div class="container">
      <a href="index.html" class="logo" aria-label="Zur Startseite">Venkshar</a>
      
      <div class="hamburger" id="hamburger">
        <div class="line1"></div>
        <div class="line2"></div>
        <div class="line3"></div>
      </div>

      <nav role="navigation" id="nav-links">
        <a href="#services">Leistungen</a>
        <a href="#clients">Kunden</a>
        <a href="#pricing">Preise</a>
        <a href="about.html">Ãœber uns</a>
      </nav>
      
      <button class="btn-contact" onclick="window.location.href='#contact'">Kontakt & Chat</button>
    </div>
  </header>

  <section class="hero" style="background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('Partner.jpg');">
    <div class="container fade-in">
      <h1>Ihr vertrauenswÃ¼rdiger Partner fÃ¼r Finanzen</h1>
      <p>Effiziente, digitale BuchhaltungslÃ¶sungen fÃ¼r Unternehmen. PersÃ¶nlich, professionell und transparent.</p>
      <button class="btn-primary" onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'})">Jetzt durchstarten</button>
    </div>
  </section>

  <section id="services" class="features fade-in">
    <div class="container">
      <h2 class="section-title">Unsere Leistungen</h2>
      <div class="feature-grid">
        <article class="feature">
          <h3>Digitale Buchhaltung</h3>
          <p>SÃ¤mtliche Buchungen werden digital und automatisiert erfasst, inkl. Belegmanagement.</p>
        </article>
        <article class="feature">
          <h3>Lohnbuchhaltung</h3>
          <p>Reibungslose Lohnabrechnung und Sozialversicherung â€“ rechtssicher und pÃ¼nktlich.</p>
        </article>
        <article class="feature">
          <h3>Mehrwertsteuer & Beratung</h3>
          <p>Optimale Steuerstrategie dank professioneller Beratung fÃ¼r Ihr Unternehmen.</p>
        </article>
      </div>
    </div>
  </section>

  <section id="clients" class="testimonials fade-in">
    <div class="container">
      <h2 class="section-title-1">Unsere zufriedenen Kunden</h2>
      <div class="testimonial-list">
        <blockquote class="testimonial">
          <p>"Die Zusammenarbeit ist absolut fantastisch. Unsere Buchhaltung ist nun stressfrei."</p>
          <cite>â€“ Firma MÃ¼ller AG</cite>
        </blockquote>
        <blockquote class="testimonial">
          <p>"Schnell, kompetent und komplett digitalisiert. Wir haben extrem viel Zeit gespart!"</p>
          <cite>â€“ Tech Solutions AG</cite>
        </blockquote>
      </div>
    </div>
  </section>

  <section id="pricing" class="pricing fade-in">
    <div class="container">
      <h2 class="section-title">Transparente Preise</h2>
      <div class="pricing-plans">
        <div class="plan">
          <h3>Basis</h3>
          <p style="font-size: 2.5rem; font-weight: 900; color: #8baaad;">CHF 250<span style="font-size: 1rem; color: #666;">/mtl.</span></p>
          <p>Digitale Buchhaltung & Lohn fÃ¼r 5 Mitarbeiter.</p>
          <button class="btn-select-plan" style="margin-top: 20px;">AuswÃ¤hlen</button>
        </div>
        <div class="plan">
          <h3>Premium</h3>
          <p style="font-size: 2.5rem; font-weight: 900; color: #8baaad;">Auf Anfrage</p>
          <p>PersÃ¶nlicher Berater & individuelle Finanzplanung.</p>
          <button class="btn-select-plan" style="margin-top: 20px;">Kontaktieren</button>
        </div>
      </div>
    </div>
  </section>

  <section id="contact" class="contact fade-in" style="background: white; padding: 5rem 0;">
    <div class="container">
      <h2 class="section-title">Kontaktieren Sie uns</h2>
      <form class="contact-form" id="contact-form" novalidate>
        <label for="name">Ihr Name</label>
        <input type="text" id="name" name="name" required placeholder="Thirunathan Kanagaratnam" />
        
        <label for="email">Ihre E-Mail</label>
        <input type="email" id="email" name="email" required placeholder="tkanagaratnam@venkshar.com" />
        
        <label for="message">Ihre Nachricht</label>
        <textarea id="message" name="message" required placeholder="Wie kÃ¶nnen wir Ihnen helfen?" rows="3"></textarea>
        
        <label>Datei anhÃ¤ngen (optional)</label>
        <div class="custom-file-upload">
          <input type="file" id="theFile" name="theFile" accept="*/*" />
          <label for="theFile" class="file-btn">
            ðŸ“Ž Dokument auswÃ¤hlen
          </label>
          <span id="file-name-display">Keine Datei ausgewÃ¤hlt</span>
        </div>
        
        <button type="submit" class="btn-submit">Nachricht sicher senden</button>
      </form>
    </div>
  </section>

  <button id="chat-open-btn">Live Chat</button>
  <div id="chat-panel">
    <div id="chat-header">
      Kundenberatung
      <button id="chat-close-btn" aria-label="Schliessen">Ã—</button>
    </div>
    <div id="chat-messages">
      <div class="chat-message staff">Hallo! Haben Sie Fragen oder Dokumente fÃ¼r uns? Hinterlassen Sie uns Ihre Nachricht und E-Mail.</div>
    </div>
    <form id="chat-form">
      <input id="chat-email" type="email" placeholder="Ihre E-Mail-Adresse fÃ¼r die Antwort..." required />
      
      <div id="chat-file-name-preview"></div>
      
      <div id="chat-input-area">
        <label for="chat-file" id="chat-file-label" title="Datei anhÃ¤ngen">ðŸ“Ž</label>
        <input type="file" id="chat-file" style="display: none;" />
        
        <input id="chat-input" type="text" placeholder="Ihre Nachricht..." required />
        <button type="submit" id="chat-send-btn">Senden</button>
      </div>
    </form>
  </div>

  <footer style="text-align:center; padding:2rem; color:#666; background: #f4f4f7;">
    Â© 2026 Venkshar Financial AG. Alle Rechte vorbehalten.
  </footer>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbw_ld7ebLB9MDrgZOLZarShxAah-BzChvijv4OZlN0SP1NyaY4spc3JYaC0_JJhwvCV/exec";

    async function getBase64(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = (e) => {
          const data = e.target.result.split(",");
          resolve({ fileName: file.name, mimeType: data[0].match(/:(\w.+);/)[1], data: data[1] });
        };
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    // Hamburger Menu
    const hamburger = document.getElementById('hamburger');
    const navLinks = document.getElementById('nav-links');
    hamburger.addEventListener('click', () => {
      navLinks.classList.toggle('nav-active');
      hamburger.classList.toggle('toggle');
    });
    document.querySelectorAll('nav a').forEach(link => {
      link.addEventListener('click', () => { navLinks.classList.remove('nav-active'); hamburger.classList.remove('toggle'); });
    });

    // Ruhigere Scroll-Animation AuslÃ¶sung
    const faders = document.querySelectorAll('.fade-in');
    const appearOnScroll = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add('visible');
        observer.unobserve(entry.target);
      });
    }, { threshold: 0.1, rootMargin: "0px" });
    faders.forEach(fader => appearOnScroll.observe(fader));

    // Formular Logik
    const fileInput = document.getElementById("theFile");
    const fileNameDisplay = document.getElementById("file-name-display");

    fileInput.addEventListener('change', function() {
      if (this.files && this.files.length > 0) {
        fileNameDisplay.textContent = this.files[0].name;
        fileNameDisplay.style.color = "#1c3738";
        fileNameDisplay.style.fontWeight = "bold";
      } else {
        fileNameDisplay.textContent = "Keine Datei ausgewÃ¤hlt";
        fileNameDisplay.style.color = "#64748b";
        fileNameDisplay.style.fontWeight = "normal";
      }
    });

    const contactForm = document.getElementById("contact-form");
    const submitBtn = contactForm.querySelector(".btn-submit");

    contactForm.addEventListener("submit", async function (e) {
      e.preventDefault();
      const originalBtnText = submitBtn.textContent;
      submitBtn.textContent = "Nachricht wird gesendet...";
      submitBtn.disabled = true;

      try {
        const formDataObj = {
          name: document.getElementById("name").value,
          email: document.getElementById("email").value,
          message: document.getElementById("message").value
        };
        if (fileInput.files.length > 0) formDataObj.fileData = await getBase64(fileInput.files[0]);

        const response = await fetch(scriptURL, { method: "POST", body: JSON.stringify(formDataObj), headers: { "Content-Type": "text/plain;charset=utf-8" } });
        const data = await response.json();
        if (data.status === "success") {
          alert("Vielen Dank! Ihre Nachricht wurde erfolgreich gesendet.");
          contactForm.reset();
          fileNameDisplay.textContent = "Keine Datei ausgewÃ¤hlt";
          fileNameDisplay.style.fontWeight = "normal";
        } else throw new Error(data.message);
      } catch (error) {
        alert("Fehler beim Senden. Bitte versuchen Sie es spÃ¤ter erneut.");
      } finally {
        submitBtn.textContent = originalBtnText;
        submitBtn.disabled = false;
      }
    });

    // Chat Logik
    const chatBtn = document.getElementById('chat-open-btn');
    const chatPanel = document.getElementById('chat-panel');
    const chatClose = document.getElementById('chat-close-btn');
    const chatForm = document.getElementById('chat-form');
    const chatInput = document.getElementById('chat-input');
    const chatEmailInput = document.getElementById('chat-email');
    const chatMessages = document.getElementById('chat-messages');
    const chatFileInput = document.getElementById('chat-file');
    const chatFileNamePreview = document.getElementById('chat-file-name-preview');
    const chatSendBtn = document.getElementById('chat-send-btn');

    chatBtn.addEventListener('click', () => { chatPanel.classList.add('visible'); chatInput.focus(); });
    chatClose.addEventListener('click', () => chatPanel.classList.remove('visible'));

    chatFileInput.addEventListener('change', function() {
      if (this.files && this.files.length > 0) {
        chatFileNamePreview.textContent = "Anhang bereit: " + this.files[0].name;
      } else {
        chatFileNamePreview.textContent = "";
      }
    });

    chatForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const msg = chatInput.value.trim();
      const email = chatEmailInput.value.trim();
      
      if (!msg || (chatEmailInput.style.display !== 'none' && !email)) return;
      
      const attachedFileName = chatFileInput.files.length > 0 ? chatFileInput.files[0].name : null;
      appendMessage(msg, 'client', attachedFileName);
      
      const originalChatBtnText = chatSendBtn.textContent;
      chatSendBtn.textContent = "...";
      chatSendBtn.disabled = true;
      chatInput.value = '';
      chatFileNamePreview.textContent = ""; 

      try {
        const chatDataObj = { name: "Ãœber Live-Chat", email: email, message: msg };
        if (chatFileInput.files.length > 0) {
          chatDataObj.fileData = await getBase64(chatFileInput.files[0]);
        }

        showTypingIndicator(); 
        
        const response = await fetch(scriptURL, { method: "POST", body: JSON.stringify(chatDataObj), headers: { "Content-Type": "text/plain;charset=utf-8" } });
        const data = await response.json();
        removeTypingIndicator();

        if (data.status === "success") {
          appendMessage("Nachricht und Anhang wurden sicher empfangen! Wir melden uns per E-Mail.", 'staff');
          chatFileInput.value = ""; 
          
          chatEmailInput.style.display = "none";
          chatEmailInput.required = false; 
        } else throw new Error(data.message);
      } catch (error) {
        removeTypingIndicator();
        appendMessage("Fehler beim Senden. Bitte nutzen Sie das Formular auf der Seite.", 'staff');
      } finally {
        chatSendBtn.textContent = originalChatBtnText;
        chatSendBtn.disabled = false;
      }
    });

    function appendMessage(text, sender, attachedFileName = null) {
      const div = document.createElement('div');
      div.className = `chat-message ${sender}`;
      let content = `<span>${text}</span>`;
      if (attachedFileName) {
        content += `<div class="chat-attachment">ðŸ“Ž ${attachedFileName}</div>`;
      }
      div.innerHTML = content;
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function showTypingIndicator() {
      const indicator = document.createElement('div');
      indicator.className = 'typing-indicator';
      indicator.id = 'typing';
      indicator.innerHTML = '<span></span><span></span><span></span>';
      chatMessages.appendChild(indicator);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }
    function removeTypingIndicator() {
      const indicator = document.getElementById('typing');
      if (indicator) indicator.remove();
    }
  </script>
</body>
</html>